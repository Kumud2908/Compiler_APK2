C/C++ Syntax Analyzer with AST
==============================

Token: #include <stdio.h>   Type: PREPROCESSOR   
Token: int                  Type: KEYWORD        
Token: add                  Type: IDENTIFIER     
Token: (                    Type: LPAREN         
Token: int                  Type: KEYWORD        
Token: a                    Type: IDENTIFIER     
Token: ,                    Type: COMMA          
Token: int                  Type: KEYWORD        
Token: b                    Type: IDENTIFIER     
Token: )                    Type: RPAREN         
Token: {                    Type: LBRACE         
Token: return               Type: KEYWORD        
Token: a                    Type: IDENTIFIER     
Token: +                    Type: ARITHMETIC_OP  
Token: b                    Type: IDENTIFIER     
Token: ;                    Type: SEMICOLON      
Token: }                    Type: RBRACE         
Token: int                  Type: KEYWORD        
Token: sub                  Type: IDENTIFIER     
Token: (                    Type: LPAREN         
Token: int                  Type: KEYWORD        
Token: a                    Type: IDENTIFIER     
Token: ,                    Type: COMMA          
Token: int                  Type: KEYWORD        
Token: b                    Type: IDENTIFIER     
Token: )                    Type: RPAREN         
Token: {                    Type: LBRACE         
Token: return               Type: KEYWORD        
Token: a                    Type: IDENTIFIER     
Token: -                    Type: ARITHMETIC_OP  
Token: b                    Type: IDENTIFIER     
Token: ;                    Type: SEMICOLON      
Token: }                    Type: RBRACE         
Token: int                  Type: KEYWORD        
Token: main                 Type: IDENTIFIER     
Token: (                    Type: LPAREN         
Token: )                    Type: RPAREN         
Token: {                    Type: LBRACE         
Token: int                  Type: KEYWORD        
Token: (                    Type: LPAREN         
Token: *                    Type: ARITHMETIC_OP  
Token: ops                  Type: IDENTIFIER     
Token: [                    Type: LBRACKET       
Token: 2                    Type: INTEGER_CONSTANT
Token: ]                    Type: RBRACKET       
Token: )                    Type: RPAREN         
Token: (                    Type: LPAREN         
Token: int                  Type: KEYWORD        
Token: ,                    Type: COMMA          
Token: int                  Type: KEYWORD        
Token: )                    Type: RPAREN         
Token: =                    Type: ASSIGN         
Token: {                    Type: LBRACE         
Token: add                  Type: IDENTIFIER     
Token: ,                    Type: COMMA          
Token: sub                  Type: IDENTIFIER     
Token: }                    Type: RBRACE         
Token: ;                    Type: SEMICOLON      
Token: printf               Type: IDENTIFIER     
Token: (                    Type: LPAREN         
Token: "%d\n"               Type: STRING_LITERAL 
Token: ,                    Type: COMMA          
Token: ops                  Type: IDENTIFIER     
Token: [                    Type: LBRACKET       
Token: 0                    Type: INTEGER_CONSTANT
Token: ]                    Type: RBRACKET       
Token: (                    Type: LPAREN         
Token: 5                    Type: INTEGER_CONSTANT
Token: ,                    Type: COMMA          
Token: 2                    Type: INTEGER_CONSTANT
Token: )                    Type: RPAREN         
Token: )                    Type: RPAREN         
Token: ;                    Type: SEMICOLON      
Token: printf               Type: IDENTIFIER     
Token: (                    Type: LPAREN         
Token: "%d\n"               Type: STRING_LITERAL 
Token: ,                    Type: COMMA          
Token: ops                  Type: IDENTIFIER     
Token: [                    Type: LBRACKET       
Token: 1                    Type: INTEGER_CONSTANT
Token: ]                    Type: RBRACKET       
Token: (                    Type: LPAREN         
Token: 5                    Type: INTEGER_CONSTANT
Token: ,                    Type: COMMA          
Token: 2                    Type: INTEGER_CONSTANT
Token: )                    Type: RPAREN         
Token: )                    Type: RPAREN         
Token: ;                    Type: SEMICOLON      
Token: return               Type: KEYWORD        
Token: 0                    Type: INTEGER_CONSTANT
Token: ;                    Type: SEMICOLON      
Token: }                    Type: RBRACE         

=== PARSING SUCCESSFUL ===

=== SEMANTIC ANALYSIS ===
=== SEMANTIC ANALYSIS STARTED ===
=== SEMANTIC ANALYSIS COMPLETED ===
Found 0 semantic error(s)
Found 0 warning(s)

=== SYMBOL TABLE (ACTIVE SCOPES) ===
Scope 0:
  function 'main' : int (scope: 0, line: 28) [has_return]
 (scope: 0, line: 28) [has_return]
  function 'sub' : int(int, int) (scope: 0, line: 20) [has_return]
    parameter 'a' : int (scope: 0, line: 0)
 (scope: 0, line: 0)
    parameter 'b' : int (scope: 0, line: 0)
 (scope: 0, line: 0)
 (int a, int b) (scope: 0, line: 20) [has_return]
  function 'add' : int(int, int) (scope: 0, line: 19) [has_return]
    parameter 'a' : int (scope: 0, line: 0)
 (scope: 0, line: 0)
    parameter 'b' : int (scope: 0, line: 0)
 (scope: 0, line: 0)
 (int a, int b) (scope: 0, line: 19) [has_return]
  constant 'NULL' : void* (scope: 0, line: 0)
 (scope: 0, line: 0)

 Semantic analysis passed with no errors.

=== CODE GENERATION ===

=== THREE ADDRESS CODE ===
add:
     = a param_decl int
     = b param_decl int
    t0 = a + b
    return t0
sub:
     = a param_decl int
     = b param_decl int
    t1 = a - b
    return t1
main:
    t2 = &ops
    *t2 = add
    t3 = t2 + 4
    *t3 = sub
    param "%d\n"
    t4 = 0 * 4
    t5 = &ops
    t6 = t5 + t4
    t7 = *t6
    param 5
    param 2
    t8 = call* t7, 2
    param t8
    t9 = call printf, 2
    param "%d\n"
    t10 = 1 * 4
    t11 = &ops
    t12 = t11 + t10
    t13 = *t12
    param 5
    param 2
    t14 = call* t13, 2
    param t14
    t15 = call printf, 2
    return 0

Total instructions: 36

=== ABSTRACT SYNTAX TREE ===
TranslationUnit :  (line 17)
  Preprocessor : #include <stdio.h> (line 17)
  FunctionDefinition :  (line 19)
    DeclarationSpecifiers :  (line 19)
      TypeSpecifier : int (line 19)
    FunctionDeclarator :  (line 19)
      DirectDeclarator : add (line 19)
      ParameterList :  (line 19)
        ParameterDeclaration :  (line 19)
          DeclarationSpecifiers :  (line 19)
            TypeSpecifier : int (line 19)
          DirectDeclarator : a (line 19)
        ParameterDeclaration :  (line 19)
          DeclarationSpecifiers :  (line 19)
            TypeSpecifier : int (line 19)
          DirectDeclarator : b (line 19)
    CompoundStatement :  (line 19)
      BlockItemList :  (line 19)
        BlockItem :  (line 19)
          ReturnStatement :  (line 19)
            AdditiveExpression : + (line 19)
              Identifier : a (line 19)
              Identifier : b (line 19)
  FunctionDefinition :  (line 20)
    DeclarationSpecifiers :  (line 20)
      TypeSpecifier : int (line 20)
    FunctionDeclarator :  (line 20)
      DirectDeclarator : sub (line 20)
      ParameterList :  (line 20)
        ParameterDeclaration :  (line 20)
          DeclarationSpecifiers :  (line 20)
            TypeSpecifier : int (line 20)
          DirectDeclarator : a (line 20)
        ParameterDeclaration :  (line 20)
          DeclarationSpecifiers :  (line 20)
            TypeSpecifier : int (line 20)
          DirectDeclarator : b (line 20)
    CompoundStatement :  (line 20)
      BlockItemList :  (line 20)
        BlockItem :  (line 20)
          ReturnStatement :  (line 20)
            AdditiveExpression : - (line 20)
              Identifier : a (line 20)
              Identifier : b (line 20)
  FunctionDefinition :  (line 28)
    DeclarationSpecifiers :  (line 22)
      TypeSpecifier : int (line 22)
    FunctionDeclarator :  (line 22)
      DirectDeclarator : main (line 22)
    CompoundStatement :  (line 28)
      BlockItemList :  (line 23)
        BlockItem :  (line 23)
          Declaration :  (line 23)
            DeclarationSpecifiers :  (line 23)
              TypeSpecifier : int (line 23)
            InitDeclaratorList :  (line 23)
              InitDeclarator :  (line 23)
                FunctionDeclarator :  (line 23)
                  Declarator :  (line 23)
                    Pointer :  (line 23)
                    ArrayDeclarator :  (line 23)
                      DirectDeclarator : ops (line 23)
                      Constant : 2 (line 23)
                  ParameterList :  (line 23)
                    ParameterDeclaration :  (line 23)
                      DeclarationSpecifiers :  (line 23)
                        TypeSpecifier : int (line 23)
                    ParameterDeclaration :  (line 23)
                      DeclarationSpecifiers :  (line 23)
                        TypeSpecifier : int (line 23)
                InitializerList :  (line 23)
                  InitializerList :  (line 23)
                    Initializer :  (line 23)
                      Identifier : add (line 23)
                    Initializer :  (line 23)
                      Identifier : sub (line 23)
        BlockItem :  (line 25)
          ExpressionStatement :  (line 25)
            FunctionCall :  (line 25)
              Identifier : printf (line 25)
              ArgumentList :  (line 25)
                StringLiteral : "%d\n" (line 25)
                FunctionCall :  (line 25)
                  ArraySubscript :  (line 25)
                    Identifier : ops (line 25)
                    Constant : 0 (line 25)
                  ArgumentList :  (line 25)
                    Constant : 5 (line 25)
                    Constant : 2 (line 25)
        BlockItem :  (line 26)
          ExpressionStatement :  (line 26)
            FunctionCall :  (line 26)
              Identifier : printf (line 26)
              ArgumentList :  (line 26)
                StringLiteral : "%d\n" (line 26)
                FunctionCall :  (line 26)
                  ArraySubscript :  (line 26)
                    Identifier : ops (line 26)
                    Constant : 1 (line 26)
                  ArgumentList :  (line 26)
                    Constant : 5 (line 26)
                    Constant : 2 (line 26)
        BlockItem :  (line 27)
          ReturnStatement :  (line 27)
            Constant : 0 (line 27)

AST DOT file generated: ast.dot
TAC file generated: output.tac

=== MIPS ASSEMBLY GENERATION ===

=== MIPS ASSEMBLY CODE ===
    # ==============================================
    #   MIPS Assembly Code
    #   Generated from Three-Address Code
    # ==============================================

.data
.align 2
str_0: .asciiz "%d\n"
.align 2
newline: .asciiz "\n"
.align 2
ops: .space 8

.text
.globl main


    # Function: add
func_add:
    # Function prologue
    addi $sp, $sp, -256
    sw $ra, 252($sp)
    sw $fp, 248($sp)
    addi $fp, $sp, 256
    sw $a0, 244($sp)
    sw $a1, 240($sp)
    sw $a2, 236($sp)
    sw $a3, 232($sp)
    sw $s0, 228($sp)
    sw $s1, 224($sp)
    sw $s2, 220($sp)
    sw $s3, 216($sp)
    sw $s4, 212($sp)
    sw $s5, 208($sp)
    sw $s6, 204($sp)
    sw $s7, 200($sp)
    # Loading parameter a from stack
    lw $t1, 244($sp)
    # Loading parameter b from stack
    lw $t2, 240($sp)
    add $t0, $t1, $t2
    move $v0, $t0
    # Function epilogue
    lw $s0, 228($sp)
    lw $s1, 224($sp)
    lw $s2, 220($sp)
    lw $s3, 216($sp)
    lw $s4, 212($sp)
    lw $s5, 208($sp)
    lw $s6, 204($sp)
    lw $s7, 200($sp)
    lw $fp, 248($sp)
    lw $ra, 252($sp)
    addi $sp, $sp, 256
    jr $ra

    # Function: sub
func_sub:
    # Function prologue
    addi $sp, $sp, -256
    sw $ra, 252($sp)
    sw $fp, 248($sp)
    addi $fp, $sp, 256
    sw $a0, 244($sp)
    sw $a1, 240($sp)
    sw $a2, 236($sp)
    sw $a3, 232($sp)
    sw $s0, 228($sp)
    sw $s1, 224($sp)
    sw $s2, 220($sp)
    sw $s3, 216($sp)
    sw $s4, 212($sp)
    sw $s5, 208($sp)
    sw $s6, 204($sp)
    sw $s7, 200($sp)
    # Loading parameter a from stack
    lw $t1, 244($sp)
    # Loading parameter b from stack
    lw $t2, 240($sp)
    sub $t0, $t1, $t2
    move $v0, $t0
    # Function epilogue
    lw $s0, 228($sp)
    lw $s1, 224($sp)
    lw $s2, 220($sp)
    lw $s3, 216($sp)
    lw $s4, 212($sp)
    lw $s5, 208($sp)
    lw $s6, 204($sp)
    lw $s7, 200($sp)
    lw $fp, 248($sp)
    lw $ra, 252($sp)
    addi $sp, $sp, 256
    jr $ra

    # Function: main
main:
    # Reserve stack space for register spills
    addi $sp, $sp, -256
    la $t0, ops
    la $t1, func_add
    sw $t1, 0($t0)
    li $t2, 4
    add $t1, $t0, $t2
    la $t0, func_sub
    sw $t0, 0($t1)
    la $s0, str_0
    # Save string param str_0 to $s0
    li $t2, 0
    li $t3, 4
    mul $t0, $t2, $t3
    la $t2, ops
    add $t3, $t2, $t0
    lw $t0, 0($t3)
    # Indirect call through t7
    li $a0, 5
    li $a1, 2
    jalr $t0
    move $s1, $v0
    move $s2, $s1
    # Save param t8 to $s2
    # Call printf
    # Print integer
    li $v0, 1
    move $a0, $s2
    syscall
    li $v0, 11
    li $a0, 10
    syscall
    la $s3, str_0
    # Save string param str_0 to $s3
    li $t1, 1
    li $t2, 4
    mul $t0, $t1, $t2
    la $t1, ops
    add $t2, $t1, $t0
    lw $t0, 0($t2)
    # Indirect call through t13
    li $a0, 5
    li $a1, 2
    jalr $t0
    move $s4, $v0
    move $s5, $s4
    # Save param t14 to $s5
    # Call printf
    # Print integer
    li $v0, 1
    move $a0, $s5
    syscall
    li $v0, 11
    li $a0, 10
    syscall
    li $v0, 0
    # Restore stack and exit program
    addi $sp, $sp, 256
    li $v0, 10
    syscall

MIPS file generated: output.s

==================================================
COMPILATION SUCCESSFUL
==================================================
